<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

        <title>reveal.js</title>

        <link rel="stylesheet" href="dist/reset.css" />
        <link rel="stylesheet" href="dist/reveal.css" />
        <link rel="stylesheet" href="dist/theme/tokyo-night.css" />

        <!-- Theme used for syntax highlighted code -->
        <link rel="stylesheet" href="plugin/highlight/tokyo-night.css" />
        <link rel="stylesheet" href="plugin/chalkboard/style.css" />
        <link rel="stylesheet" href="plugin/customcontrols/style.css" />
        <script src="https://cdn.tailwindcss.com"></script>
    </head>

    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                    <h1><code>Pygame</code></h1>
                    <img
                        class="r-stretch"
                        src="https://ktkv-presentations.github.io/algos-23"
                        data-type="qrcode" />
                </section>
                <section>
                    <section>
                        <h1><code>Pygame</code></h1>
                        <p>
                            набор Python-библиотек, который предоставляет
                            инструменты для разработки 2D игр и мультимедийных
                            приложений
                        </p>
                        <p>Позволяет работать с:</p>
                        <ul>
                            <li>Графикой</li>
                            <li>Звуком</li>
                            <li>Событиями и вводом</li>
                            <li>Таймерами и анимациями</li>
                            <li>Обработкой коллизий</li>
                            <li>Многозадачностью</li>
                        </ul>
                    </section>
                    <section>
                        <h1>Установка зависимостей</h1>
                        <p>
                            Установка Pygame выполняется через пакетный менеджер
                            pip
                        </p>
                        <pre><code data-trim class="bash">
pip install pygame
                        </code></pre>
                        <em>
                            В случае с работой локально - необходимо перед этим
                            инициализировать виртуальную среду окружения через
                            пакет
                            <code>venv</code>
                        </em>
                        <hr />
                        <p>Для работы с модулем его необходимо импортировать</p>
                        <pre><code data-trim class="python">
 import pygame
                        </code></pre>
                    </section>
                    <section>
                        <h1>Инициализация</h1>
                        <h4><code class="python">pygame.init()</code></h4>
                        <p>
                            запускает все внутренние модули библиотеки, такие
                            как модули для работы с графикой, звуком и событиями
                        </p>
                        <pre><code data-trim class="python">
import pygame
pygame.init()
                        </code></pre>
                    </section>
                    <section>
                        <h1>Создание окна</h1>
                        <h4>
                            <code class="python">
                                pygame.display.set_mode()
                            </code>
                        </h4>
                        <p>создает окно для отображения игры</p>
                        <pre><code data-trim class="python">
screen = pygame.display.set_mode((800, 600))
                        </code></pre>
                        <em>создает окно размером 800x600</em>
                        <hr />
                        <h4>
                            Переменная
                            <code>screen</code>
                        </h4>
                        <p>
                            хранит окно, в котором будут отображаться все
                            элементы игры
                        </p>
                    </section>
                    <section>
                        <h1>Игровой цикл</h1>
                        <p>
                            Все события игры происходят в рамках главного
                            игрового цикла
                        </p>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="border-b">
                                <h4>Обработка событий</h4>
                                <p>Проверка, что происходило на экране</p>
                            </div>
                            <div class="border-b">
                                <h4>Обновление состояния</h4>
                                <p>Модификация данных игры</p>
                            </div>
                            <div class="border-b">
                                <h4>Отображение</h4>
                                <p>Отрисовка объектов игры на экране</p>
                            </div>
                        </div>
                    </section>
                </section>
                <section>
                    <section>
                        <h1>Работа с модулями</h1>
                        <h4>Изображение</h4>
                        <p>
                            Для загрузки и отображения изображений используется
                            <code>pygame.image.load()</code>
                        </p>
                        <pre><code data-trim class="python">
player_image = pygame.image.load('player.png')
screen.blit(player_image, (x, y))
                        </code></pre>
                        <em>
                            Отображение изображения на экране в координатах (x,
                            y)
                        </em>
                    </section>
                    <section>
                        <h4>Текст</h4>
                        <p>
                            Для отображения текста используется модуль
                            <code>pygame.font</code>
                        </p>
                        <pre><code data-trim class="python">
font = pygame.font.SysFont('Arial', 30)
text = font.render('Hello, Pygame!', True, (255, 255, 255))
screen.blit(text, (x, y))
                        </code></pre>
                    </section>
                    <section>
                        <h4>Цвета</h4>
                        <p>
                            цвета задаются с использованием кортежей RGB
                            (красный, зеленый, синий)
                        </p>
                        <pre><code data-trim class="python">
red = (255, 0, 0)
screen.fill(red)  # Заполнение экрана красным цветом
                        </code></pre>
                    </section>
                    <section>
                        <h4>Шрифты</h4>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="border-b">
                                <h5>Системные шрифты</h5>
                                <pre><code data-trim class="python">
pygame.font.SysFont()
                                </code></pre>
                            </div>
                            <div class="border-b">
                                <h5>Шрифты TrueType</h5>
                                <p>
                                    Загружаются через
                                    <code>pygame.font.Font()</code>
                                </p>
                                <em>
                                    если у вас есть файл шрифта в расширении
                                    arial.ttf
                                </em>
                            </div>
                        </div>
                    </section>
                </section>
                <section>
                    <section>
                        <h1>Работа с событиями</h1>
                        <h3>Обработка пользовательского ввода</h3>
                        <h4><code>pygame.event.get()</code></h4>
                        <p>
                            Позволяет получить список всех событий, произошедших
                            за последний кадр, и обработать их
                        </p>
                    </section>
                    <section>
                        <h1>Виды событий</h1>
                        <h4><code>pygame.QUIT</code></h4>
                        <p>возникает, когда пользователь закрывает окно игры</p>
                        <pre><code data-trim class="python">
for event in pygame.event.get():
    if event.type == pygame.QUIT:
        running = False
                        </code></pre>
                    </section>
                    <section>
                        <h1>Виды событий</h1>
                        <h4><code>pygame.KEYDOWN</code></h4>
                        <p>возникает, когда клавиша на клавиатуре нажата</p>
                        <pre><code data-trim class="python">
for event in pygame.event.get():
    if event.type == pygame.KEYDOWN:
        if event.key == pygame.K_LEFT:
            x -= 5
        elif event.key == pygame.K_RIGHT:
            x += 5
                        </code></pre>
                    </section>
                    <section>
                        <h1>Виды событий</h1>
                        <h4><code>pygame.KEYUP</code></h4>
                        <p>
                            возникает, когда клавиша на клавиатуре отпускается
                        </p>
                        <pre><code data-trim class="python">
for event in pygame.event.get():
    if event.type == pygame.KEYUP:
        if event.key == pygame.K_LEFT:
            # Прекратить движение влево
            x_speed = 0
        elif event.key == pygame.K_RIGHT:
            # Прекратить движение вправо
            x_speed = 0
                        </code></pre>
                    </section>
                    <section>
                        <h1>Виды событий</h1>
                        <h4><code>pygame.MOUSEBUTTONDOWN</code></h4>
                        <p>возникает, когда кнопка мыши нажимается</p>
                        <pre><code data-trim class="python">
for event in pygame.event.get():
    if event.type == pygame.MOUSEBUTTONDOWN:
        if event.button == 1:  # Левый клик мыши
            print("Левый клик в точке", event.pos)
        elif event.button == 3:  # Правый клик мыши
            print("Правый клик в точке", event.pos)
                        </code></pre>
                    </section>
                    <section>
                        <h1>Виды событий</h1>
                        <h4><code>pygame.MOUSEBUTTONUP</code></h4>
                        <p>возникает, когда кнопка мыши отпускается</p>
                        <pre><code data-trim class="python">
for event in pygame.event.get():
    if event.type == pygame.MOUSEBUTTONUP:
        if event.button == 1:  # Левый клик мыши
            print("Левый клик отпущен в точке", event.pos)
                        </code></pre>
                    </section>
                    <section>
                        <h1>Виды событий</h1>
                        <h4><code>pygame.MOUSEMOTION</code></h4>
                        <p>возникает, когда мышь перемещается по экрану</p>
                        <pre><code data-trim class="python">
for event in pygame.event.get():
    if event.type == pygame.MOUSEMOTION:
        print("Мышь перемещена в точку", event.pos)
                        </code></pre>
                    </section>
                    <section>
                        <h1>Виды событий</h1>
                        <h4><code>pygame.MOUSEWHEEL</code></h4>
                        <p>возникает при прокрутке колесика мыши</p>
                        <pre><code data-trim class="python">
for event in pygame.event.get():
    if event.type == pygame.MOUSEWHEEL:
        if event.y &gt; 0:
            print("Колесо прокручено вверх")
        elif event.y &lt; 0:
            print("Колесо прокручено вниз")
                        </code></pre>
                    </section>
                </section>
                <section>
                    <section>
                        <h1>Структура проекта</h1>
                        <p>
                            разделен на несколько папок и файлов для удобства
                            разработки и последующего масштабирования
                        </p>
                        <pre
                            class="r-stretch"><code data-trim data-line-numbers class="plaintext">
my_game/
├── assets/            # Папка для всех ресурсов игры (изображения, звуки, шрифты и т.д.)
│   ├── images/        # Изображения (спрайты, фоны и т.д.)
│   ├── sounds/        # Звуки (эффекты, музыка и т.д.)
│   └── fonts/         # Шрифты
├── src/               # Исходный код
│   ├── __init__.py    # Инициализация пакета
│   ├── game.py        # Главный файл игры
│   ├── player.py      # Модуль управления персонажем
│   ├── level.py       # Модуль уровней
│   ├── settings.py    # Конфигурационные параметры игры
│   └── utils.py       # Утилиты и вспомогательные функции
├── README.md          # Документация о проекте
└── requirements.txt   # Зависимости (например, pygame)
                        </code></pre>
                    </section>
                </section>
                <section>
                    <section>
                        <h1>Обновление экрана</h1>
                        <p>
                            После того как объекты обновлены, экран должен быть
                            перерисован с новыми данными
                        </p>
                        <pre><code data-trim class="python">
screen.fill((0, 0, 0))  # Очистка экрана (черный цвет)
... отрисовка сущностей ...
pygame.display.flip()  # Обновление экрана
                        </code></pre>
                    </section>
                    <section>
                        <h1>Рендеринг (отрисовка объектов)</h1>
                        <p>
                            На каждом шаге игрового цикла нужно перерисовывать
                            объекты
                        </p>
                        <pre><code data-trim class="python">
player.render(screen)
                        </code></pre>
                    </section>
                    <section>
                        <h1>Пример основного цикла</h1>
                        <pre
                            class="r-stretch"><code data-trim data-line-numbers class="python">
import pygame

pygame.init()

screen = pygame.display.set_mode((800, 600))
pygame.display.set_caption("Game Loop Example")

player_x = 100
player_y = 100

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
    
    player_x += 1  # Пример: движение вправо
    
    screen.fill((0, 0, 0))  # Очистка экрана
    pygame.draw.rect(screen, (255, 0, 0), (player_x, player_y, 50, 50))  # Отображение игрока
    
    pygame.display.flip()

pygame.quit()
                        </code></pre>
                    </section>
                </section>
                <section>
                    <section>
                        <h1>Работа с изображениями</h1>
                        <ul>
                            <li>
                                изображения загружаются с помощью функции
                                <code>pygame.image.load()</code>
                            </li>
                            <li>
                                После загрузки изображение можно отобразить на
                                экране с помощью
                                <code>blit()</code>
                            </li>
                        </ul>
                        <pre><code data-trim class="python">
screen = pygame.display.set_mode(....)

player_image = pygame.image.load("player.png")
screen.blit(player_image, (350, 250))
                        </code></pre>
                    </section>
                    <section>
                        <h1>Размеры изображения</h1>
                        <p>
                            Изменение размера изображения происходит через
                            <code>pygame.transform.scale()</code>
                        </p>
                        <pre><code data-trim class="python">
player_image = pygame.image.load("player.png")
player_image = pygame.transform.scale(player_image, (50, 50))
                        </code></pre>
                    </section>
                    <section>
                        <h1>Прозрачность</h1>
                        <p>
                            При работе с изображениями с альфа-каналом
                            необходимо pygame указать, чтобы он работал с ним
                            как с альфа-каналом
                        </p>
                        <h4>Альфа-канал</h4>
                        <p>
                            указывает, насколько этот пиксель прозрачен или
                            непрозрачен
                        </p>
                        <pre><code data-trim class="python">
player_image = pygame.image.load("player.png")
player_image = player_image.convert_alpha() 
                        </code></pre>
                    </section>
                </section>
                <section>
                    <section>
                        <h1>Столкновения</h1>
                        <p>
                            когда два объекта пересекаются или оказываются на
                            одной позиции
                        </p>
                        <h4><code>pygame.Rect.colliderect()</code></h4>
                        <p>
                            используется для проверки пересечения
                            прямоугольников
                        </p>
                    </section>
                    <section>
                        <h1>Методы проверки столкновений</h1>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="border-b">
                                <h4>
                                    <code class="python">collidelist()</code>
                                </h4>
                                <p>
                                    проверка столкновения с первым объектом в
                                    списке
                                </p>
                            </div>
                            <div class="border-b">
                                <h4>
                                    <code class="python">collidelistall()</code>
                                </h4>
                                <p>
                                    проверка столкновения с любыми объектами в
                                    списке
                                </p>
                            </div>
                            <div class="border-b col-span-2">
                                <h4>
                                    <code class="python">collidepoint()</code>
                                </h4>
                                <p>
                                    проверка, находится ли точка в пределах
                                    прямоугольника
                                </p>
                            </div>
                        </div>
                    </section>
                    <section>
                        <pre class="r-stretch"><code data-trim data-line-numbers class="python">
import pygame

pygame.init()

# Настройка экрана
screen = pygame.display.set_mode((800, 600))
pygame.display.set_caption("Collision Detection Example")

# Игровые объекты
player_image = pygame.image.load("player.png")
player_rect = player_image.get_rect()
enemy_image = pygame.image.load("enemy.png")
enemy_rect = enemy_image.get_rect()

# Позиционирование объектов
player_rect.topleft = (100, 100)
enemy_rect.topleft = (200, 100)

# Основной цикл игры
running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

    # Перемещение персонажа (влево)
    player_rect.x += 5

    # Проверка столкновения
    if player_rect.colliderect(enemy_rect):
        print("Столкновение!")

    # Заполнение экрана
    screen.fill((255, 255, 255))

    # Отображение объектов
    screen.blit(player_image, player_rect)
    screen.blit(enemy_image, enemy_rect)

    # Обновление экрана
    pygame.display.flip()

pygame.quit()
                        </code></pre>
                    </section>
                </section>
            </div>
        </div>

        <script src="dist/reveal.js"></script>
        <script src="plugin/notes/notes.js"></script>
        <script src="plugin/markdown/markdown.js"></script>
        <script src="plugin/highlight/highlight.js"></script>
        <script src="plugin/qrcode/qrcode.js"></script>
        <script src="plugin/mermaid/mermaid.js"></script>
        <script src="plugin/chalkboard/plugin.js"></script>
        <script src="plugin/customcontrols/plugin.js"></script>

        <script>
            tailwind.config = {
                corePlugins: {
                    preflight: false,
                },
            }
        </script>
        <script>
            // More info about initialization & config:
            // - https://revealjs.com/initialization/
            // - https://revealjs.com/config/

            const colors = {
                blue0: 'rgb(61, 89, 161)',
                blue: 'rgb(122, 162, 247)',
                cyan: 'rgb(125, 207, 255)',
                magenta: 'rgb(187, 154, 247)',
                orange: 'rgb(255, 158, 100)',
                yellow: 'rgb(224, 175, 104)',
                green: 'rgb(158, 206, 106)',
                teal: 'rgb(26, 188, 156)',
                red: 'rgb(255, 117, 127)',
                red1: 'rgb(219, 75, 75)',
                fg: 'rgb(192, 202, 245)',
                bg: 'rgb(26, 27, 38)',
                transparent: '#00000000',
            }

            Reveal.initialize({
                hash: true,
                // Learn about plugins: https://revealjs.com/plugins/
                plugins: [
                    RevealMarkdown,
                    RevealHighlight,
                    RevealNotes,
                    RevealMermaid,
                    RevealChalkboard,
                    RevealCustomControls,
                ],
                slideNumber: true,
                customcontrols: {
                    controls: [
                        {
                            icon: '<div></div>',
                            title: 'Clear canvas (DEL)',
                            action: 'RevealChalkboard.clear();',
                        },
                        {
                            icon: '<div></div>',
                            title: 'Toggle chalkboard (B)',
                            action: 'RevealChalkboard.toggleChalkboard();',
                        },
                        {
                            icon: '<div></div>',
                            title: 'Toggle notes canvas (C)',
                            action: 'RevealChalkboard.toggleNotesCanvas();',
                        },
                    ],
                },
                chalkboard: {
                    boardmarkerWidth: 5,
                    boardmarkers: [
                        {
                            color: colors.bg,
                            cursor:
                                'url(' +
                                path +
                                'img/boardmarker-black.png), auto',
                        },
                        {
                            color: colors.fg,
                            cursor:
                                'url(' +
                                path +
                                'img/boardmarker-black.png), auto',
                        },
                        {
                            color: colors.blue,
                            cursor:
                                'url(' +
                                path +
                                'img/boardmarker-black.png), auto',
                        },
                        {
                            color: colors.red,
                            cursor:
                                'url(' +
                                path +
                                'img/boardmarker-black.png), auto',
                        },
                        {
                            color: colors.green,
                            cursor:
                                'url(' +
                                path +
                                'img/boardmarker-black.png), auto',
                        },
                        {
                            color: colors.yellow,
                            cursor:
                                'url(' +
                                path +
                                'img/boardmarker-black.png), auto',
                        },
                        {
                            color: colors.teal,
                            cursor:
                                'url(' +
                                path +
                                'img/boardmarker-black.png), auto',
                        },
                        {
                            color: colors.orange,
                            cursor:
                                'url(' +
                                path +
                                'img/boardmarker-black.png), auto',
                        },
                    ],
                    chalks: [
                        {
                            color: colors.bg,
                            cursor:
                                'url(' + path + 'img/chalk-white.png), auto',
                        },
                        {
                            color: colors.fg,
                            cursor:
                                'url(' + path + 'img/chalk-white.png), auto',
                        },
                        {
                            color: colors.blue,
                            cursor:
                                'url(' + path + 'img/chalk-white.png), auto',
                        },
                        {
                            color: colors.red,
                            cursor:
                                'url(' + path + 'img/chalk-white.png), auto',
                        },
                        {
                            color: colors.green,
                            cursor:
                                'url(' + path + 'img/chalk-white.png), auto',
                        },
                        {
                            color: colors.yellow,
                            cursor:
                                'url(' + path + 'img/chalk-white.png), auto',
                        },
                        {
                            color: colors.teal,
                            cursor:
                                'url(' + path + 'img/chalk-white.png), auto',
                        },
                        {
                            color: colors.orange,
                            cursor:
                                'url(' + path + 'img/chalk-white.png), auto',
                        },
                    ],
                },
                mermaid: {
                    securityLevel: 'loose',
                    theme: 'dark',
                    themeVariables: {
                        darkMode: true,
                        textColor: colors.fg,
                        background: colors.bg,
                        mainBkg: colors.bg,
                        lineColor: colors.fg,
                    },
                },
            })
        </script>
    </body>
</html>
